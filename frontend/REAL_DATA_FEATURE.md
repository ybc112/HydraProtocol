# çœŸå®æ•°æ®åˆ†æåŠŸèƒ½ - ä½¿ç”¨æŒ‡å—

## ğŸ‰ æ–°åŠŸèƒ½è¯´æ˜

ç°åœ¨HydraProtocolæ”¯æŒ**çœŸå®Excel/CSV/JSONæ–‡ä»¶åˆ†æ**ï¼ä¸å†ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ï¼

---

## ğŸš€ å®Œæ•´æµ‹è¯•æµç¨‹

### æ­¥éª¤1: å®‰è£…æ–°ä¾èµ–

```bash
cd frontend

# å®‰è£…xlsxåº“ï¼ˆå¦‚æœè¿˜æ²¡å®‰è£…ï¼‰
npm install

# ç¡®è®¤xlsxå·²å®‰è£…
npm list xlsx
# åº”è¯¥æ˜¾ç¤º: xlsx@0.18.5
```

---

### æ­¥éª¤2: å‡†å¤‡æµ‹è¯•æ•°æ®

æˆ‘ä»¬æä¾›äº†ä¸¤ä¸ªæµ‹è¯•æ–‡ä»¶ï¼š

**patients.csv** (CSVæ ¼å¼)
```csv
ID,å§“å,å¹´é¾„,æ€§åˆ«,æ¢å¤å¤©æ•°
1,æ‚£è€…A,45,ç”·,12
2,æ‚£è€…B,67,å¥³,18
3,æ‚£è€…C,52,ç”·,15
...
```

**patients.json** (JSONæ ¼å¼)
```json
[
  { "id": 1, "age": 45, "recoveryDays": 12 },
  { "id": 2, "age": 67, "recoveryDays": 18 },
  ...
]
```

**ä½ç½®**: `frontend/test-data/`

---

### æ­¥éª¤3: ä¸Šä¼ çœŸå®æ•°æ®

1. **å¯åŠ¨å‰ç«¯**
   ```bash
   npm run dev
   ```

2. **è¿æ¥é’±åŒ…**
   - è®¿é—® http://localhost:3000
   - è¿æ¥ Suiet Wallet
   - ç¡®ä¿åœ¨ Testnet ç½‘ç»œ

3. **ä¸Šä¼ æ–‡ä»¶**
   - è¿›å…¥ "Marketplace" é¡µé¢
   - ç‚¹å‡» "+ Upload New Data"
   - é€‰æ‹© `test-data/patients.csv`
   - å¡«å†™ä¿¡æ¯ï¼š
     - Category: Healthcare
     - Data Type: csv
     - Description: æ‚£è€…æ¢å¤æ•°æ®æµ‹è¯•é›†
     - Price: 10 SUI
   - ç‚¹å‡» "Upload & List Data"
   - **ç­‰å¾…ä¸¤ç¬”äº¤æ˜“ç¡®è®¤** (çº¦30ç§’)

4. **éªŒè¯ä¸Šä¼ æˆåŠŸ**
   - çœ‹åˆ°æˆåŠŸæ¶ˆæ¯å’Œ Blob ID
   - é¡µé¢è‡ªåŠ¨åˆ·æ–°
   - æ•°æ®å‡ºç°åœ¨marketplaceåˆ—è¡¨ä¸­

---

### æ­¥éª¤4: è´­ä¹°æ•°æ®ï¼ˆå¯é€‰ï¼‰

å¦‚æœè¦æµ‹è¯•å®Œæ•´æµç¨‹ï¼Œå¯ä»¥ï¼š
- åˆ‡æ¢åˆ°å¦ä¸€ä¸ªé’±åŒ…
- è´­ä¹°åˆšä¸Šä¼ çš„æ•°æ®
- ç¡®è®¤æ”¯ä»˜äº¤æ˜“

---

### æ­¥éª¤5: çœŸå®æ•°æ®ZKPè®¡ç®— ğŸ”

1. **è¿›å…¥Computeé¡µé¢**
   - ç‚¹å‡»å¯¼èˆªæ  "Compute"

2. **é€‰æ‹©æ•°æ®é›†**
   - å·¦ä¾§åˆ—è¡¨æ˜¾ç¤ºå·²è´­ä¹°çš„æ•°æ®
   - é€‰æ‹©åˆšæ‰ä¸Šä¼ /è´­ä¹°çš„æ•°æ®é›†
   - çœ‹åˆ° "âœ“ 1 dataset selected"

3. **é€‰æ‹©è®¡ç®—ç±»å‹**
   - å³ä¾§é€‰æ‹© "Average Calculation"
   - æˆ–é€‰æ‹© "Threshold Query" (éœ€è¾“å…¥é˜ˆå€¼)

4. **ç¡®è®¤ä½¿ç”¨çœŸå®æ•°æ®**
   - âœ… ç¡®ä¿å‹¾é€‰ "ä½¿ç”¨çœŸå®æ•°æ® (Use Real Data)"
   - å¦‚æœä¸å‹¾é€‰ï¼Œå°†ä½¿ç”¨éšæœºæ¨¡æ‹Ÿæ•°æ®

5. **å¼€å§‹è®¡ç®—**
   - ç‚¹å‡» "Compute with ZKP"
   - è§‚å¯Ÿæ§åˆ¶å°è¾“å‡ºï¼š

```
ğŸ“¥ Fetching real data from Walrus...
ğŸ“Š Processing dataset: 0x1234...
ğŸ“¥ Downloading blob: 0xabc...
ğŸ”“ Decrypting 456 bytes...
âœ… Decrypted 123 bytes
ğŸ“Š Parsing CSV file...
âœ… Extracted 20 numbers from patients.csv

ğŸ“Š Data statistics:
{
  count: 20,
  min: 9,
  max: 71,
  mean: 53.4,
  median: 53.5
}

ğŸ“ Preparing circuit input: 20 â†’ 3 numbers
âœ… Prepared circuit input: [45, 67, 52]

ğŸ” Generating ZKP proof for average circuit...
âœ… Average proof generated successfully
```

6. **æŸ¥çœ‹æ•°æ®é¢„è§ˆ**
   - åœ¨"Data Source Toggle"ä¸‹æ–¹ä¼šæ˜¾ç¤ºï¼š
   ```
   ğŸ“Š Data Preview
   Loaded patients.csv
   Total data points: 20
   Range: 9.00 - 71.00
   Mean: 53.40, Median: 53.50
   ```

7. **ç­‰å¾…è¯æ˜ç”Ÿæˆå’ŒéªŒè¯**
   - [1/4] Generating Proof... (5-10ç§’)
   - [2/4] Submitting to Blockchain...
   - [3/4] Verifying Proof...
   - [4/4] âœ… Verified!

8. **æŸ¥çœ‹ç»“æœ**
   ```
   âœ… Computation successful and verified!
   
   Average: 54
   Commitment: 1234567890123456...
   
   Submit TX: 0x1234567890abcdef...
   Verify TX: 0xfedcba0987654321...
   
   âœ¨ Status: VERIFIED
   ```

---

## ğŸ” æ•°æ®è§£ææ”¯æŒçš„æ ¼å¼

| æ ¼å¼ | æ‰©å±•å | è§£æé€»è¾‘ | ç¤ºä¾‹ |
|------|--------|----------|------|
| **Excel** | `.xlsx`, `.xls` | æå–æ‰€æœ‰å·¥ä½œè¡¨çš„æ•°å€¼å•å…ƒæ ¼ | æ‚£è€…å¹´é¾„è¡¨.xlsx |
| **CSV** | `.csv` | è§£ææ‰€æœ‰é€—å·åˆ†éš”çš„æ•°å­— | patients.csv |
| **JSON** | `.json` | é€’å½’æå–æ‰€æœ‰æ•°å€¼å­—æ®µ | data.json |
| **Text** | `.txt` | æ­£åˆ™åŒ¹é…æ‰€æœ‰æ•°å­— | numbers.txt |

---

## ğŸ§ª æµ‹è¯•åœºæ™¯

### åœºæ™¯1: æ‚£è€…å¹´é¾„å¹³å‡å€¼

**æ•°æ®**: `patients.csv` (å¹´é¾„åˆ—: 45, 67, 52, 71, 38, 55, 63, 49, 58, 42)
**ç”µè·¯**: Average (å–å‰3ä¸ª)
**æœŸæœ›è¾“å…¥**: [45, 67, 52]
**æœŸæœ›è¾“å‡º**: Average: 54

### åœºæ™¯2: æ¢å¤å¤©æ•°é˜ˆå€¼æŸ¥è¯¢

**æ•°æ®**: `patients.csv` (æ¢å¤å¤©æ•°: 12, 18, 15, 22, 9, 14, 19, 11, 16, 13)
**ç”µè·¯**: Threshold (å–å‰10ä¸ª)
**é˜ˆå€¼**: 15
**æœŸæœ›è¾“å‡º**: Count above threshold: 4 (18, 22, 19, 16)

### åœºæ™¯3: JSONæ•°æ®åˆ†æ

**æ•°æ®**: `patients.json`
**æå–å­—æ®µ**: age, recoveryDays (å…±20ä¸ªæ•°å­—)
**ç”µè·¯**: Average
**æœŸæœ›è¾“å…¥**: [45, 12, 67, 18, 52, ...] â†’ é‡‡æ ·3ä¸ª

---

## ğŸ“Š æ•°æ®å¤„ç†é€»è¾‘

### è‡ªåŠ¨é‡‡æ ·ç­–ç•¥

å½“æ•°æ®ç‚¹è¶…è¿‡ç”µè·¯è¦æ±‚æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨é‡‡æ ·ï¼š

```typescript
// Averageç”µè·¯: éœ€è¦3ä¸ªæ•°å­—
// Thresholdç”µè·¯: éœ€è¦10ä¸ªæ•°å­—

// å¦‚æœæ•°æ®æœ‰100ä¸ªç‚¹ï¼š
const step = Math.floor(100 / 3);  // = 33
// å–ç´¢å¼•: [0, 33, 66]

// ç»“æœ: å‡åŒ€åˆ†å¸ƒçš„ä»£è¡¨æ€§æ ·æœ¬
```

### æ•°æ®ä¸è¶³æ—¶çš„å¡«å……

```typescript
// å¦‚æœåªæœ‰2ä¸ªæ•°æ®ç‚¹: [45, 67]
const avg = (45 + 67) / 2;  // = 56
// å¡«å……å: [45, 67, 56]
```

---

## ğŸ¥ æ¼”ç¤ºè„šæœ¬ï¼ˆæ›´æ–°ï¼‰

### æ–°çš„æ¼”ç¤ºè¯æœ¯

```
ã€å±•ç¤ºä¸Šä¼ ã€‘
"è¿™é‡Œæˆ‘ä¸Šä¼ äº†ä¸€ä¸ªçœŸå®çš„åŒ»ç–—æ•°æ®CSVæ–‡ä»¶ï¼ŒåŒ…å«10åæ‚£è€…çš„å¹´é¾„å’Œæ¢å¤å¤©æ•°ã€‚"

ã€ç­‰å¾…ä¸Šä¼ å®Œæˆã€‘
"æ•°æ®è¢«AES-256åŠ å¯†åå­˜å‚¨åˆ°Walruså»ä¸­å¿ƒåŒ–å­˜å‚¨ç½‘ç»œã€‚"

ã€åˆ‡æ¢åˆ°Computeé¡µé¢ã€‘
"ç°åœ¨æˆ‘è¦è®¡ç®—å¹³å‡å¹´é¾„ï¼Œä½†è¯·æ³¨æ„â€”â€”"

ã€å‹¾é€‰"ä½¿ç”¨çœŸå®æ•°æ®"ã€‘
"æˆ‘å‹¾é€‰äº†'ä½¿ç”¨çœŸå®æ•°æ®'é€‰é¡¹ã€‚ç³»ç»Ÿä¼šï¼š
1. ä»Walrusä¸‹è½½åŠ å¯†æ–‡ä»¶
2. ä½¿ç”¨å­˜å‚¨çš„å¯†é’¥è§£å¯†
3. è§£æCSVæ ¼å¼
4. æå–å¹´é¾„åˆ—æ•°å­—"

ã€ç‚¹å‡»Computeã€‘
"çœ‹ï¼Œè¿™é‡Œæ˜¾ç¤ºäº†æ•°æ®é¢„è§ˆï¼š
- åŠ è½½äº†patients.csv
- æ€»å…±20ä¸ªæ•°æ®ç‚¹
- èŒƒå›´ä»9åˆ°71å²
- å¹³å‡å€¼53.4å²"

ã€è¯æ˜ç”Ÿæˆä¸­ã€‘
"ç°åœ¨æµè§ˆå™¨æ­£åœ¨ï¼š
1. å¯¹çœŸå®æ•°æ®ç”Ÿæˆé›¶çŸ¥è¯†è¯æ˜
2. æäº¤åˆ°SuiåŒºå—é“¾
3. æ™ºèƒ½åˆçº¦éªŒè¯è¯æ˜æœ‰æ•ˆæ€§"

ã€æ˜¾ç¤ºç»“æœã€‘
"ç»“æœå‡ºæ¥äº†ï¼å¹³å‡å¹´é¾„æ˜¯54å²ã€‚
å…³é”®æ˜¯ï¼šæˆ‘ä»æœªçœ‹åˆ°åŸå§‹çš„æ‚£è€…èº«ä»½ä¿¡æ¯ï¼Œ
ä½†èƒ½è¯æ˜è¿™ä¸ªå¹³å‡å€¼æ˜¯ä»çœŸå®æ•°æ®è®¡ç®—å‡ºæ¥çš„ï¼"

ã€å¼ºè°ƒåˆ›æ–°ã€‘
"è¿™å°±æ˜¯HydraProtocolçš„åˆ›æ–°ï¼š
âœ… çœŸå®æ•°æ®åŠ å¯†å­˜å‚¨åœ¨Walrus
âœ… éšç§è®¡ç®—ä½¿ç”¨é›¶çŸ¥è¯†è¯æ˜
âœ… ç»“æœå¯éªŒè¯ä½†æ•°æ®ä¿å¯†
âœ… å®Œå…¨å»ä¸­å¿ƒåŒ–ï¼Œæ— éœ€ä¿¡ä»»ç¬¬ä¸‰æ–¹"
```

---

## ğŸ”§ è°ƒè¯•æŠ€å·§

### æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—

æŒ‰ F12 æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼ŒæŸ¥çœ‹è¯¦ç»†æ—¥å¿—ï¼š

```javascript
// æˆåŠŸä¸‹è½½
ğŸ“¥ Downloading blob: 0xabc123...
âœ… Download successful! (456 bytes)

// æˆåŠŸè§£å¯†
ğŸ”“ Decrypting 456 bytes...
âœ… Decrypted 123 bytes

// æˆåŠŸè§£æ
ğŸ“Š Parsing CSV file...
ğŸ“‹ Found 11 rows
âœ… Extracted 20 numbers from CSV

// æ•°æ®ç»Ÿè®¡
ğŸ“Š Data statistics: {count: 20, min: 9, max: 71, ...}

// ç”µè·¯è¾“å…¥
âœ… Prepared circuit input: [45, 67, 52]
```

### å¸¸è§é—®é¢˜æ’æŸ¥

#### é—®é¢˜1: "No encryption key found"
**åŸå› **: åŠ å¯†å¯†é’¥æœªä¿å­˜åˆ°localStorage
**è§£å†³**: ä½¿ç”¨è‡ªå·±ä¸Šä¼ çš„æ•°æ®ï¼Œæˆ–é‡æ–°ä¸Šä¼ 

#### é—®é¢˜2: "Failed to parse file"
**åŸå› **: æ–‡ä»¶æ ¼å¼ä¸æ”¯æŒæˆ–æŸå
**è§£å†³**: ä½¿ç”¨æ”¯æŒçš„æ ¼å¼ (Excel/CSV/JSON/Text)

#### é—®é¢˜3: "No numeric data found"
**åŸå› **: æ–‡ä»¶ä¸­æ²¡æœ‰æ•°å­—
**è§£å†³**: ç¡®ä¿æ–‡ä»¶åŒ…å«æ•°å€¼åˆ—

#### é—®é¢˜4: "Walrus download failed: 404"
**åŸå› **: Blob IDä¸å­˜åœ¨æˆ–å·²è¿‡æœŸ
**è§£å†³**: é‡æ–°ä¸Šä¼ æ–‡ä»¶

---

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–å»ºè®®

### æ–‡ä»¶å¤§å°é™åˆ¶

- **æ¨è**: < 1MB
- **æœ€å¤§**: < 10MB (Walruså…è´¹å±‚)
- **è¶…å¤§æ–‡ä»¶**: è€ƒè™‘é¢„å¤„ç†æˆ–åˆ†ç‰‡

### æ•°æ®ç‚¹æ•°é‡

- **Averageç”µè·¯**: è‡ªåŠ¨é‡‡æ ·åˆ°3ä¸ª
- **Thresholdç”µè·¯**: è‡ªåŠ¨é‡‡æ ·åˆ°10ä¸ª
- **æœªæ¥**: æ”¯æŒæ›´å¤§ç”µè·¯ (100+ points)

---

## ğŸ¯ ä¸æ¨¡æ‹Ÿæ•°æ®çš„å¯¹æ¯”

| ç‰¹æ€§ | æ¨¡æ‹Ÿæ•°æ® (æ—§) | çœŸå®æ•°æ® (æ–°) |
|------|--------------|--------------|
| **æ•°æ®æ¥æº** | `Math.random()` | Walruså­˜å‚¨çš„å®é™…æ–‡ä»¶ |
| **æ•°æ®å†…å®¹** | éšæœºç”Ÿæˆ3ä¸ªæ•°å­— | è§£æExcel/CSVçš„å®é™…æ•°å€¼ |
| **å¯éªŒè¯æ€§** | âœ… ZKPæœ‰æ•ˆ | âœ… ZKPæœ‰æ•ˆ |
| **å®é™…æ„ä¹‰** | âŒ ä»…æ¼”ç¤ºæŠ€æœ¯ | âœ… çœŸå®æ•°æ®åˆ†æ |
| **æ¼”ç¤ºä»·å€¼** | â­â­â­ | â­â­â­â­â­ |

---

## ğŸš€ ä¸‹ä¸€æ­¥æ”¹è¿›

### çŸ­æœŸï¼ˆå·²å®Œæˆï¼‰
- [x] æ·»åŠ xlsxè§£æåº“
- [x] å®ç°ä¸‹è½½å’Œè§£å¯†
- [x] æ”¯æŒå¤šç§æ–‡ä»¶æ ¼å¼
- [x] æ·»åŠ æ•°æ®é¢„è§ˆ
- [x] æ˜¾ç¤ºç»Ÿè®¡ä¿¡æ¯

### ä¸­æœŸï¼ˆ1-2å‘¨ï¼‰
- [ ] æ”¯æŒé€‰æ‹©ç‰¹å®šåˆ—ï¼ˆå¦‚åªåˆ†æ"å¹´é¾„"åˆ—ï¼‰
- [ ] æ•°æ®å¯è§†åŒ–ï¼ˆå›¾è¡¨å±•ç¤ºï¼‰
- [ ] å¯¼å‡ºè®¡ç®—æŠ¥å‘Š
- [ ] æ‰¹é‡æ•°æ®å¤„ç†

### é•¿æœŸï¼ˆ2-4å‘¨ï¼‰
- [ ] æ”¯æŒæ›´å¤§çš„ZKPç”µè·¯ (100+ points)
- [ ] åŠ¨æ€ç”µè·¯ç¼–è¯‘
- [ ] å¤šç»´åº¦æ•°æ®åˆ†æ
- [ ] æœºå™¨å­¦ä¹ æ¨¡å‹éšç§æ¨ç†

---

## ğŸ‰ æ€»ç»“

**æ­å–œï¼** æ‚¨çš„HydraProtocolç°åœ¨æ”¯æŒçœŸå®æ•°æ®åˆ†æäº†ï¼

è¿™æ˜¯ä¸€ä¸ª**å·¨å¤§çš„é£è·ƒ**ï¼š
- âœ… ä»æ¼”ç¤ºçº§åŸå‹ â†’ å¯ç”¨äº§å“
- âœ… ä»æ¨¡æ‹Ÿæ•°æ® â†’ çœŸå®æ•°æ®åˆ†æ
- âœ… ä»æŠ€æœ¯å±•ç¤º â†’ å®é™…åº”ç”¨ä»·å€¼

**åœ¨é»‘å®¢æ¾ä¸­ï¼Œè¿™å°†æ˜¯æ‚¨çš„æ ¸å¿ƒç«äº‰åŠ›ï¼** ğŸ†

---

**é—®é¢˜åé¦ˆ**: å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—æˆ–æäº¤Issue
**æœ€åæ›´æ–°**: 2025-11-15

